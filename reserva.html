<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Elige tu actividad</title>
  <style>
    body{margin:0;font-family:sans-serif;background:#111;color:#fff;padding:20px}
    h1{text-align:center;font-size:22px}
    h2{text-align:center;font-size:16px;font-weight:400;color:#ccc;margin-top:4px}
    .actividad{border:2px solid #333;padding:12px;margin:12px 0;border-radius:12px;cursor:pointer}
    .actividad .precio{font-weight:900;font-size:18px}
    .precio.rojo{color:#e11d48}
    .precio.verde{color:#16a34a}
    .boton{margin-top:8px;padding:10px 20px;border:none;border-radius:20px;font-weight:900;cursor:pointer}
    .reservar{background:#22c55e;color:#fff}
    .reservar-caja{background:#dc2626;color:#fff}
    .monedero{text-align:center;margin-top:30px;font-size:20px;font-weight:900;color:#facc15}
  </style>
</head>
<body>
  <h1>Elige tu actividad</h1>
  <h2>Contamos con más de 100 centros afiliados cerca de ti.</h2>

  <div id="actividades"></div>
  <div class="monedero">Tu monedero: <span id="monedero">0€</span></div>

  <script>
    const actividades = [
      {nombre:"Clase de Yoga", precio:15},
      {nombre:"Acceso gimnasio", precio:5.50},
      {nombre:"Clase de Pilates", precio:15},
      {nombre:"Clase de Zumba", precio:15},
      {nombre:"Entrenamiento funcional", precio:15},
      {nombre:"Clase de Danza", precio:15},
    ];

    const totalGanado = parseFloat(localStorage.getItem("totalEuros")||"0");
    const lista=document.getElementById("actividades");

    actividades.forEach(act=>{
      const div=document.createElement("div");
      div.className="actividad";
      div.innerHTML=`
        <div>${act.nombre} — 
          <span class="precio ${act.precio==5.5?"verde":"rojo"}">${act.precio}€</span>
        </div>
      `;
      div.addEventListener("click",()=>{
        // eliminar botones anteriores
        div.querySelectorAll("button").forEach(b=>b.remove());
        // agregar boton segun saldo
        if(totalGanado>=act.precio){
          const btn=document.createElement("button");
          btn.textContent="Reservar";
          btn.className="boton reservar";
          btn.onclick=()=>{localStorage.setItem("actividad",act.nombre);localStorage.setItem("precio",act.precio);window.location="confirmacion.html";}
          div.appendChild(btn);
        }else{
          const btn=document.createElement("button");
          btn.textContent="Reservar y pagar diferencia en caja";
          btn.className="boton reservar-caja";
          btn.onclick=()=>{localStorage.setItem("actividad",act.nombre);localStorage.setItem("precio",act.precio);window.location="confirmacion.html";}
          div.appendChild(btn);
        }
      });
      lista.appendChild(div);
    });

    // animación monedero
    let start=Date.now();
    let dur=5000;
    function anim(){
      let p=Math.min(1,(Date.now()-start)/dur);
      let val=(totalGanado*p).toFixed(2);
      document.getElementById("monedero").textContent=val+"€";
      if(p<1)requestAnimationFrame(anim);
    }
    anim();
  </script>
</body>
</html>

